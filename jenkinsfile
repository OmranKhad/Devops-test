pipeline {
  agent any
  stages {

    stage('Git') {
       steps {
        echo 'Pulling...' 
        git branch: 'omran-khd',
        url : 'https://github.com/OmranKhad/Devops-test.git'
      }
    }
      
    stage('MVN Clean') {
       steps {
        sh "mvn clean"      
      }
    }

      stage('MVN Compile') {
       steps {
        sh "mvn compile"      
      }
    }
    
    stage('MVN Package') {
      steps {
        sh "mvn package"      
      }
    }
	stage('SonarQube Analysis') {
	    def mvn = tool 'Default Maven';
	    withSonarQubeEnv() {
	      sh "${mvn}/bin/mvn clean verify sonar:sonar -Dsonar.projectKey=tpfoyer -Dsonar.projectName='tpfoyer'"
    }
  }


}
}
